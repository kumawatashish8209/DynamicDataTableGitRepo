<!--
  @description       : 
  @author            : ChangeMeIn@UserSettingsUnder.SFDoc
  @group             : 
  @last modified on  : 09-10-2025
  @last modified by  : ChangeMeIn@UserSettingsUnder.SFDoc
-->
<template>
    <template if:true={isLoading}>
        <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
    </template>
    <!-- Search for an  object -->
    <lightning-combobox
        name="myObjects"
        value={selectedValue}
        options={objectOptions}
        onfocus={handleFocus}
        onchange={handleChangeSelectedObject}
        placeholder="Select an object"
    ></lightning-combobox>

    <!-- fields selection -->
    <template if:true={fieldsVisibility}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">

                <div class="slds-modal__content slds-p-around_medium">
                    <lightning-dual-listbox name="fields"
                        label="Select fields"
                        source-label="Available"
                        selected-label="Selected"
                        field-level-help="Select your preferred fields"
                        options={fieldsOptions}
                        value={selectedFields}
                        onchange={handleChangeDualList}>
                    </lightning-dual-listbox>
                </div>
                
                <footer class="slds-modal__footer slds-grid slds-grid_align-spread">
                    <lightning-button label="Cancel" onclick={handleCancel}></lightning-button>
                    <lightning-button variant="brand" type="submit" label="Load Data" onclick={handleLoad}></lightning-button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

    <!-- Data Table of selected object -->
    <template if:true={tableVisibility}>
        <div class="slds-m-around_medium " style="height:410px;">
            <lightning-datatable    
                key-field="Id"
                data={showedData}
                columns={columns} 
                onsave={handleSave} 
                draft-values={drafvals} 
                onloadmore={handleLoadMore}
                show-row-number-column
                enable-infinite-loading>
            </lightning-datatable>
        </div>
    </template>
    
</template>